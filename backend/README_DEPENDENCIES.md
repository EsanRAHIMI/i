# ุฑุงูููุง ุจุฑุฑุณ ูุงุจุณุชฺฏโูุง Python

ุงู ุฑุงูููุง ุฑูุดโูุง ูุฎุชูู ุจุฑุฑุณ ูพฺฉุฌโูุง ูุตุจ ุดุฏู ู ููุงุณู ุจุง `requirements.txt` ุฑุง ูุดุงู ูโุฏูุฏ.

## ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุฎูุฏฺฉุงุฑ (ูพุดููุงุฏ)

```bash
cd backend
source venv/bin/activate  # ุง ูุฑ ูุญุท ูุฌุงุฒ ุฏฺฏุฑ
python3 check_dependencies.py
```

ุงู ุงุณฺฉุฑูพุช:
- โ ูพฺฉุฌโูุง ูุทุงุจู ุจุง requirements.txt ุฑุง ูุดุงู ูโุฏูุฏ
- โ๏ธ ุนุฏู ุชุทุงุจู ูุณุฎูโูุง ุฑุง ฺฏุฒุงุฑุด ูโุฏูุฏ
- โ ูพฺฉุฌโูุง ฺฏูโุดุฏู ุฑุง ูุณุช ูโฺฉูุฏ
- โน๏ธ ูพฺฉุฌโูุง ุงุถุงู ุฑุง ููุงุด ูโุฏูุฏ

## ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ pip check

```bash
pip check
```

ุงู ุฏุณุชูุฑ ูุงุจุณุชฺฏโูุง ูุงุณุงุฒฺฏุงุฑ ุฑุง ูพุฏุง ูโฺฉูุฏ (ุงูุง ูุณุฎูโูุง ุฑุง ุจุง requirements.txt ููุงุณู ููโฺฉูุฏ).

## ุฑูุด 3: ููุงุณู ุฏุณุช

### ูุณุช ูพฺฉุฌโูุง ูุตุจ ุดุฏู:
```bash
pip list --format=freeze > installed.txt
```

### ููุงุณู ุจุง requirements.txt:
```bash
# ูุตุจ ูพฺฉุฌโูุง ฺฏูโุดุฏู
pip install -r requirements.txt

# ุจุฑุฑุณ ุงูฺฉู ููู ูพฺฉุฌโูุง ูุทุงุจู ูุณุชูุฏ
pip install -r requirements.txt --dry-run
```

## ุฑูุด 4: ุงุณุชูุงุฏู ุงุฒ pipdeptree (ุจุฑุง ุฏุฑุฎุช ูุงุจุณุชฺฏโูุง)

```bash
# ูุตุจ pipdeptree
pip install pipdeptree

# ููุงุด ุฏุฑุฎุช ูุงุจุณุชฺฏโูุง
pipdeptree

# ููุงุด ููุท ูพฺฉุฌโูุง ุณุทุญ ุจุงูุง
pipdeptree --warn silence
```

## ุฑูุด 5: ุจูโุฑูุฒุฑุณุงู requirements.txt ุงุฒ ูุญุท ูุนู

ุงฺฏุฑ ูโุฎูุงูุฏ `requirements.txt` ุฑุง ุงุฒ ูพฺฉุฌโูุง ูุนู ูุญุท ุจูโุฑูุฒ ฺฉูุฏ:

```bash
# ุงุฌุงุฏ ูุงู requirements.txt ุฌุฏุฏ ุงุฒ ูุญุท ูุนู
pip freeze > requirements.new.txt

# ููุงุณู ุจุง requirements.txt ูุฏู
diff requirements.txt requirements.new.txt
```

โ๏ธ **ูุดุฏุงุฑ**: ุงู ุฑูุด ุชูุงู ูุงุจุณุชฺฏโูุง ูุฑุน (transitive dependencies) ุฑุง ูู ุดุงูู ูโุดูุฏ ฺฉู ูุนูููุงู ููโุฎูุงูุฏ!

## ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ

### 1. ูุตุจ ูพฺฉุฌโูุง ฺฏูโุดุฏู:
```bash
pip install -r requirements.txt
```

### 2. ุจูโุฑูุฒุฑุณุงู ูพฺฉุฌโูุง ูุฏู:
```bash
# ุจูโุฑูุฒุฑุณุงู ููู ูพฺฉุฌโูุง ุจู ุขุฎุฑู ูุณุฎู
pip install --upgrade -r requirements.txt
```

### 3. ุญุฐู ูพฺฉุฌโูุง ุงุถุงู:
```bash
# ุญุฐู ฺฉ ูพฺฉุฌ ุฎุงุต
pip uninstall package-name

# ุญุฐู ููู ูพฺฉุฌโูุง ู ูุตุจ ูุฌุฏุฏ ุงุฒ requirements.txt
pip freeze > backup.txt
pip uninstall -r backup.txt -y
pip install -r requirements.txt
```

### 4. ููฺฏุงูโุณุงุฒ ฺฉุงูู ูุญุท:
```bash
# ุญุฐู ูุญุท ูุฌุงุฒ ูุฏู
rm -rf venv

# ุงุฌุงุฏ ูุญุท ุฌุฏุฏ
python3.11 -m venv venv
source venv/bin/activate

# ูุตุจ ุงุฒ requirements.txt
pip install --upgrade pip
pip install -r requirements.txt
```

## ูฺฉุงุช ููู

1. **ููุดู ุงุฒ ูุญุท ูุฌุงุฒ ุงุณุชูุงุฏู ฺฉูุฏ**: ุงู ฺฉุงุฑ ุจุงุนุซ ุฌุฏุงุณุงุฒ ูุงุจุณุชฺฏโูุง ูพุฑูฺูโูุง ูุฎุชูู ูโุดูุฏ.

2. **requirements.txt ุฑุง commit ฺฉูุฏ**: ุงู ูุงู ุจุงุฏ ุฏุฑ ฺฏุช ุจุงุดุฏ ุชุง ุฏฺฏุฑุงู ุจุชูุงููุฏ ูุญุท ฺฉุณุงู ุจุณุงุฒูุฏ.

3. **pin ฺฉุฑุฏู ูุณุฎูโูุง**: ุงุณุชูุงุฏู ุงุฒ `==` ุจู ุฌุง `>=` ุจุงุนุซ ูโุดูุฏ ููู ูุญุทโูุง ฺฉุณุงู ุจุงุดูุฏ.

4. **ุจุฑุฑุณ ููุธู**: ูุจู ุงุฒ ูุฑ commitุ `check_dependencies.py` ุฑุง ุงุฌุฑุง ฺฉูุฏ.

5. **requirements.lock.txt**: ุงฺฏุฑ ุงุฒ pipenv ุง poetry ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุงู lock ุฑุง ูู commit ฺฉูุฏ.

## ูุซุงู ุฎุฑูุฌ ุงุณฺฉุฑูพุช check_dependencies.py

```
================================================================================
๐ฆ ฺฏุฒุงุฑุด ููุงุณู ูพฺฉุฌโูุง ูุตุจ ุดุฏู ุจุง requirements.txt
================================================================================

โ ูพฺฉุฌโูุง ูุทุงุจู (61):
   โข fastapi==0.104.1
   โข uvicorn==0.24.0
   ...

โ๏ธ  ุนุฏู ุชุทุงุจู ูุณุฎู (2):
   โข torch: ูุตุจ ุดุฏู=2.1.0, ููุฑุฏ ูุงุฒ=2.9.0
   โข psutil: ูุตุจ ุดุฏู=5.9.6, ููุฑุฏ ูุงุฒ=7.1.0

โ ูพฺฉุฌโูุง ฺฏูโุดุฏู (4):
   โข elevenlabs
   โข noisereduce
   โข TTS
   โข webrtcvad

โน๏ธ  ูพฺฉุฌโูุง ุงุถุงู ูุตุจ ุดุฏู (145):
   โข aiohttp-retry
   โข langchain-community
   ...
```

## ๐ ููฺฏุงูโุณุงุฒ ุฎูุฏฺฉุงุฑ requirements.txt (ูพุดููุงุฏ)

ุจุฑุง ุจูโุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ `requirements.txt` ุจุง ูุณุฎูโูุง ูุงูุนุงู ูุตุจ ุดุฏู:

### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช Python (ุฏููโุชุฑ)

```bash
cd backend
source venv/bin/activate
python3 sync_requirements.py
```

### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช Bash (ุณุงุฏูโุชุฑ)

```bash
cd backend
source venv/bin/activate
./sync-requirements.sh
```

ุงู ุงุณฺฉุฑูพุชโูุง:
1. โ ุงุจุชุฏุง `requirements.txt` ุฑุง ูุตุจ ูโฺฉููุฏ
2. โ ูุณุฎูโูุง ูุงูุนุงู ูุตุจ ุดุฏู ุฑุง ูพุฏุง ูโฺฉููุฏ
3. โ `requirements.txt` ุฑุง ุจุง ูุณุฎูโูุง ูุงูุน ุจูโุฑูุฒ ูโฺฉููุฏ
4. โ ฺฉ backup ุงุฒ ูุงู ูุฏู ุงุฌุงุฏ ูโฺฉููุฏ
5. โ ููุท ูพฺฉุฌโูุง ุงุตู ุฑุง ูฺฏู ูโุฏุงุฑูุฏ (ูุงุจุณุชฺฏโูุง ูุฑุน ุฑุง ุงุถุงูู ููโฺฉููุฏ)

**ูุฒุงุง:**
- โ ูุณุฎูโูุง ูุงูุน ุฏุฑ requirements.txt ุซุจุช ูโุดููุฏ
- โ ุฏุฑ ุฒูุงู ุฏูพูู ุฏุฑ ูุงุณุชุ ูุณุฎูโูุง ุฏุฑุณุช ูุตุจ ูโุดููุฏ
- โ ููุท ูพฺฉุฌโูุง ุงุตู ูฺฏู ุฏุงุดุชู ูโุดููุฏ
- โ Backup ุฎูุฏฺฉุงุฑ ุงุฌุงุฏ ูโุดูุฏ

## ุญู ูุดฺฉู ูพฺฉุฌโูุง ฺฏูโุดุฏู

ุงฺฏุฑ ุงุณฺฉุฑูพุช ูพฺฉุฌโูุง ุฑุง "ฺฏูโุดุฏู" ฺฏุฒุงุฑุด ูโุฏูุฏ ุงูุง ุฏุฑ ูุงูุน ูุตุจ ูุณุชูุฏ:

1. ุจุฑุฑุณ ูุงู ูพฺฉุฌ (ููฺฉู ุงุณุช ูุงู ูุชูุงูุช ุฏุงุดุชู ุจุงุดุฏ)
2. ุจุฑุฑุณ ุงูฺฉู ุฏุฑ ูุญุท ูุฌุงุฒ ูุนุงู ูุณุชุฏ ุง ูู
3. ุงุณุชูุงุฏู ุงุฒ `sync_requirements.py` ุจุฑุง ูุตุจ ู ููฺฏุงูโุณุงุฒ ุฎูุฏฺฉุงุฑ:
```bash
python3 sync_requirements.py
```

ุง ูุตุจ ุฏุณุช:
```bash
pip install elevenlabs==0.2.27
pip install noisereduce==3.0.0
pip install TTS==0.22.0
pip install webrtcvad==2.0.10
```

